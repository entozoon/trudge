'use strict';var game,graphics,creatures=[],physicalGroup;window.onload=function(){game=new Phaser.Game({width:200,height:200,antialias:!1,renderer:Phaser.CANVAS,state:{preload:preload,create:create,update:update,render:render}})};var preload=function(){game.load.image('heroSprite','sprites/hero.png'),game.load.image('creatureSprite','sprites/creature.png')},create=function(){game.scale.scaleMode=Phaser.ScaleManager.RESIZE,game.scale.parentIsWindow=!0,graphics=game.add.graphics(0,0),physicalGroup=game.add.group(),physicalGroup.enableBody=!0,physicalGroup.physicsBodyType=Phaser.Physics.ARCADE,setTimeout(function(){creatures.push(new Creature({x:100,y:100,velocity:{x:100,y:20}}));var a=new Hero({sprite:game.add.sprite(41,42,'heroSprite'),x:game.width/2,y:game.height/2});creatures.push(a)},200)},update=function(){creatures.forEach(function(a){a.update()})},render=function(){graphics.clear(),graphics.beginFill(15658734,1),graphics.drawRect(0,0,game.width,game.height),graphics.endFill(),creatures.forEach(function(a){a.render()})};
"use strict";var constrain=function(a,b,c){return a<b?b:a>c?c:a};
'use strict';var _createClass=function(){function c(d,e){for(var g,f=0;f<e.length;f++)g=e[f],g.enumerable=g.enumerable||!1,g.configurable=!0,'value'in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}return function(d,e,f){return e&&c(d.prototype,e),f&&c(d,f),d}}();function _classCallCheck(c,d){if(!(c instanceof d))throw new TypeError('Cannot call a class as a function')}var Creature=function(){function c(d){_classCallCheck(this,c),d=d?d:{},this.sprite=d.sprite?d.sprite:game.add.sprite(41,42,'creatureSprite'),game.physics.arcade.enableBody(this.sprite),physicalGroup.add(this.sprite),this.id=creatures.length,game.physics.arcade.enableBody(this.sprite),this.sprite.body.setSize(24,26,11,7),this.sprite.body.immovable=!1,this.sprite.x=d.x?d.x:99,this.sprite.y=d.y?d.y:99,this.sprite.body.velocity=d.velocity?d.velocity:{x:0,y:0},this.sprite.mother=this,this.sprite.setHealth(100)}return _createClass(c,[{key:'getSprite',value:function getSprite(){return this.sprite}},{key:'processCallback',value:function processCallback(){return!0}},{key:'destroy',value:function destroy(){var d=this;physicalGroup.remove(this.sprite,!0),creatures=creatures.filter(function(e){return e.id==d.id})}},{key:'wasTouched',value:function wasTouched(){if(this.sprite.damage(50),console.log('HP: '+this.sprite.health),0>=this.sprite.health)return void(this.dying=!0)}},{key:'collideCallback',value:function collideCallback(d,e){d.mother&&d.mother.wasTouched(),e.mother&&e.mother.wasTouched()}},{key:'update',value:function update(){this.dying&&this.destroy(),game.physics.arcade.collide(this.sprite,physicalGroup,this.collideCallback,this.processCallback,this)}},{key:'render',value:function render(){game.debug.body(this.sprite)}}]),c}();
"use strict";var _Mathsign=Math.sign,_createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var Hero=function(a){function b(c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));for(var e in c={acceleration:c.acceleration?c.acceleration:0.7,velocityMax:c.velocityMax?c.velocityMax:700,frictionMovement:c.frictionMovement?c.frictionMovement:25},c)d[e]=c[e];return d.keys={up:game.input.keyboard.addKey(Phaser.Keyboard.UP),down:game.input.keyboard.addKey(Phaser.Keyboard.DOWN),left:game.input.keyboard.addKey(Phaser.Keyboard.LEFT),right:game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),space:game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)},d}return _inherits(b,a),_createClass(b,[{key:"velocityLimit",value:function velocityLimit(){this.sprite.body.velocity.y=constrain(this.sprite.body.velocity.y,-this.velocityMax,this.velocityMax),this.sprite.body.velocity.x=constrain(this.sprite.body.velocity.x,-this.velocityMax,this.velocityMax)}},{key:"friction",value:function friction(){this.sprite.body.velocity.y-=_Mathsign(this.sprite.body.velocity.y)*this.frictionMovement,this.sprite.body.velocity.x-=_Mathsign(this.sprite.body.velocity.x)*this.frictionMovement}},{key:"update",value:function update(){if(this.keys.up.isDown){var c=game.time.time-this.keys.up.timeDown;this.sprite.body.velocity.y-=c*this.acceleration}if(this.keys.down.isDown){var c=game.time.time-this.keys.down.timeDown;this.sprite.body.velocity.y+=c*this.acceleration}if(this.keys.left.isDown){var c=game.time.time-this.keys.left.timeDown;this.sprite.body.velocity.x-=c*this.acceleration}if(this.keys.right.isDown){var c=game.time.time-this.keys.right.timeDown;this.sprite.body.velocity.x+=c*this.acceleration}this.velocityLimit(),this.friction()}},{key:"render",value:function render(){}}]),b}(Creature);
